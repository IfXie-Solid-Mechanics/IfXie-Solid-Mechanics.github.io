(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{373:function(a,e,s){"use strict";s.r(e);var t=s(7),n=Object(t.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"deepmd-kit学习笔记-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deepmd-kit学习笔记-1"}},[a._v("#")]),a._v(" DeePMD-kit学习笔记-1")]),a._v(" "),e("h2",{attrs:{id:"_1-什么是dp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是dp"}},[a._v("#")]),a._v(" 1.什么是DP")]),a._v(" "),e("p",[a._v("深度势能 (DP) 是一种通过深度神经网络拟合原子间相互作用势（也叫势能面，potential energy surface, PES）的方法。训练数据集通常是由基于密度泛函理论（density functional theory, DFT）的方法计算获得。 相关软件是DeePMD-kit。DP方法通用性高、准确性高、计算效率高且并行效率高，是最受欢迎的机器学习势之一。")]),a._v(" "),e("h2",{attrs:{id:"_2-其他工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-其他工具"}},[a._v("#")]),a._v(" 2.其他工具")]),a._v(" "),e("h3",{attrs:{id:"_2-1-dpdata"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-dpdata"}},[a._v("#")]),a._v(" 2.1 dpdata")]),a._v(" "),e("p",[a._v("dpdata是对数据集进行处理的工具")]),a._v(" "),e("h3",{attrs:{id:"_2-2-dp-gen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-dp-gen"}},[a._v("#")]),a._v(" 2.2 DP-GEN")]),a._v(" "),e("p",[a._v("DP-GEN是“Deep Potential GENerator”的缩写，是在同步学习框架下设计的DP模型自动生成器。在DP-GEN中，数据集的增加和DP模型的改进是同时进行的。DP-GEN软件可以自动管理整个流程，包括准备作业脚本 (例如训练模型，探索构型空间、检查现有模型在构型空间的准确性并筛选出准确性不足的候选构型，以及通过DFT计算给候选构型打标签), 将作业提交到云计算或其他高性能计算集群上, 并监控工作状态。下图显示了一个典型的DP-GEN自动迭代流程，包括三个典型的过程：")]),a._v(" "),e("p",[a._v("1.训练一组DP模型（通常是四个），这些模型将被用来探索构型空间并检查探索的构型是否能够被准确预测。")]),a._v(" "),e("p",[a._v("2.采用其中一个DP模型探索构型空间，并通过比较不同DP模型之间的预测偏差来检查每个构型的预测精度。")]),a._v(" "),e("p",[a._v("3.选择一些预测精度较低的构型作为候选构型，并通过DFT计算给候选构型打标签。")]),a._v(" "),e("h3",{attrs:{id:"_2-3-dp-library"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-dp-library"}},[a._v("#")]),a._v(" 2.3 DP Library")]),a._v(" "),e("p",[a._v("DFT方法计算量大且非常耗时。因此，我们建立了DP library共享DFT计算源数据，以避免由于重复计算造成的浪费，并鼓励大家贡献自己的DFT源数据，丰富数据集，并不断改进DP模型。有了这个基础设施，对构型空间不同区域的采样可以由不同的研究人员贡献，如下图所示。当数据集更加丰富时，可以自动重新训练和改进DP模型。最后，在DP library上会得到许多DP模型。这些模型适用于大多数问题，以便研究人员可以将精力集中于应用DP模型解决实际问题，而不是耗费在构建DP模型中。当我们需要一个DP模型时，可以按照以下步骤检查应该做什么：")]),a._v(" "),e("p",[a._v("1.检查是否存在训练好的模型，直接从DP library下载模型")]),a._v(" "),e("p",[a._v("2.如果不存在，检查是否DP library上是否存在可用的DFT数据集，自己添加一些数据并训练一个模型")]),a._v(" "),e("p",[a._v("3.如果既没有训练好的模型也没有任何有价值的数据，则从头开始生成数据并从头开始训练模型")]),a._v(" "),e("p",[a._v("4.如果你愿意，将DFT源数据和模型贡献给DP library，以方便更多人使用你的数据或者模型。")]),a._v(" "),e("h2",{attrs:{id:"_3-安装前准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装前准备"}},[a._v("#")]),a._v(" 3.安装前准备")]),a._v(" "),e("ol",[e("li",[e("p",[a._v("安装第一性原理计算软件，这里推荐VASP，详细的安装教程可阅读我对于VASP安装的md教学文件；")])]),a._v(" "),e("li",[e("p",[a._v("安装分子动力学计算软件，这里推荐LAMMPS，并且推荐基于conda安装lammps-dp使用于DeePMD；")])]),a._v(" "),e("li",[e("p",[a._v("安装conda环境，主要原因是dpdata\\deepmd-kit\\dpgen大部分都是基于python写的，因此需要配置一个python环境，而python环境的配置一般偏好使用conda来进行配置，常用的conda环境配置有miniforge和anaconda两种，本文介绍的是miniforge，这也是DeePMD官网介绍的；")])]),a._v(" "),e("li",[e("p",[a._v("安装CUDA，这里的技巧类似LAMMPS，在安装DPGen的离线安装包时，顺便把CUDA装上。")])]),a._v(" "),e("li",[e("p",[a._v("安装dpdata")])])]),a._v(" "),e("h3",{attrs:{id:"_3-1-conda-pip-environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-conda-pip-environments"}},[a._v("#")]),a._v(" 3.1 Conda/pip environments")]),a._v(" "),e("h4",{attrs:{id:"_3-1-1-how-to-setup-a-conda-pip-base-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-how-to-setup-a-conda-pip-base-environment"}},[a._v("#")]),a._v(" 3.1.1 How to setup a conda/pip base environment?")]),a._v(" "),e("p",[a._v("1.对于environment的定义：")]),a._v(" "),e("p",[a._v("An environment is a directory that contains a specific collection of packages that you have installed. Different environments are isolated from each other. A base environment is required before setting up multiple environments.")]),a._v(" "),e("p",[a._v("2.第一步，下载Anaconda3:")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://repo.anaconda.com/archive/Anaconda3-2024.10-1-Linux-x86_64.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#网页下载anaconda")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" Anaconda3-2024.10-1-Linux-x86_64.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#执行安装")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#先默认回车进入")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#第一次yes直接默认就行")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#第二次回车，可以留意一下anaconda的安装路径，可以先修改路径再回车")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#第三次yes是在.bashrc中自动加入conda环境")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("p",[a._v("After installation, you can activate the base environment using")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" ~/.bashrc\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#当然，也可以把bashrc中的代码复制到一个单独的sh文件中作为激活命令")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("conda deactivate\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#退出base环境，或者从其他虚拟环境退到base环境的命令")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("Now you can use conda install or pip install command to install conda or pip packages.")]),a._v(" "),e("h4",{attrs:{id:"_3-1-2-what-is-the-difference-between-conda-and-pip"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-what-is-the-difference-between-conda-and-pip"}},[a._v("#")]),a._v(" 3.1.2 What is the difference between conda and pip?")]),a._v(" "),e("p",[a._v("The largest difference is that pip can only install Python packages, but conda can install any packages including C, C++, and Fortran packages without Python involved. We suggest reading the Anaconda blog for more information.")]),a._v(" "),e("h4",{attrs:{id:"_3-1-3-how-can-i-check-what-packages-have-been-installed"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-how-can-i-check-what-packages-have-been-installed"}},[a._v("#")]),a._v(" 3.1.3 How can I check what packages have been installed?")]),a._v(" "),e("p",[a._v("Run "),e("strong",[a._v("conda list")]),a._v(" and "),e("strong",[a._v("pip list")]),a._v(", which show all conda/pip packages that have been installed in the current environment.")]),a._v(" "),e("h4",{attrs:{id:"_3-1-4-how-to-create-a-new-conda-pip-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-4-how-to-create-a-new-conda-pip-environment"}},[a._v("#")]),a._v(" 3.1.4 How to create a new conda/pip environment?")]),a._v(" "),e("p",[a._v("To create a conda/pip environment named my_env, run")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("conda create "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" my_env "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("python")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.11")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#conda create：创建一个新的Conda环境")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#-n my_env：指定新环境的名称为 my_env，你可以根据需求将 my_env 替换为其他名称")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#python=3.11：指定环境中Python的版本为 3.11。Conda会自动下载并安装Python 3.11版本到新环境中")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("Now you can activate the environment using")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("conda activate my_env\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#在终端或命令行的提示符中，会显示你当前处于 my_env 环境下，通常会看到 (my_env) 出现在命令行开头")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#此时，所有 Python 命令都会使用 my_env 中的 Python 解释器和包，而不会影响到全局环境")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" activate my_env\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#一个较早版本的命令，Conda 4.4及以后版本不推荐")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h4",{attrs:{id:"_3-1-5-why-do-i-need-multiple-environments-instead-of-one"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-5-why-do-i-need-multiple-environments-instead-of-one"}},[a._v("#")]),a._v(" 3.1.5 Why do I need multiple environments instead of one?")]),a._v(" "),e("p",[a._v("Due to multiple reasons, dependencies of packages often conflict with each other. For example, Python 3.11 and 3.12 cannot be installed in the same environment; CUDA 11 and CUDA 12 packages cannot be installed in the same environment; Open MPI and MPICH cannot be installed in the same environment; packages built against zlib 1.2 and 1.3 cannot be installed in the same environment. While conda-forge has tried its best to reduce package conflicts, it may still happen when installing multiple packages. Installing different packages into different environments will reduce the risk of meeting the conflict packages.")]),a._v(" "),e("h3",{attrs:{id:"_3-2-安装dpdata"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-安装dpdata"}},[a._v("#")]),a._v(" 3.2 安装dpdata")]),a._v(" "),e("p",[a._v("在conda环境中，执行命令")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("pip3 "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" dpdata\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3-3-安装dpgen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-安装dpgen"}},[a._v("#")]),a._v(" 3.3 安装DPGen")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/deepmodeling/dpgen\npip "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ./dpgen\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#记录第一次安装出现以下报错")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.tensorflow 2.9.0 requires flatbuffers<2,>=1.12, but you have flatbuffers 2.0 which is incompatible.tensorflow 2.9.0 requires tensorflow-estimator<2.10.0,>=2.9.0rc0, but you have tensorflow-estimator 2.12.0 which is incompatible.")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#但是我自己执行tensorflow命令是没问题的")]),a._v("\npython "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"import tensorflow as tf; print(tf.__version__)"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#正常输出2.9.0")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br")])]),e("h2",{attrs:{id:"_4-具体安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-具体安装"}},[a._v("#")]),a._v(" 4.具体安装")]),a._v(" "),e("h3",{attrs:{id:"_4-1-easy-install"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-easy-install"}},[a._v("#")]),a._v(" 4.1 Easy Install")]),a._v(" "),e("ol",[e("li",[e("p",[a._v("没有必要安装Easy Install版本；")])]),a._v(" "),e("li",[e("p",[a._v("但是网络上部分教程是Easy Install安装教程，特此提醒。")])])]),a._v(" "),e("h3",{attrs:{id:"_4-2-install-from-source-code-不推荐这个方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-install-from-source-code-不推荐这个方法"}},[a._v("#")]),a._v(" 4.2 Install from source code （不推荐这个方法）")]),a._v(" "),e("p",[a._v("如果对于Linux环境配置十分熟悉，否则不是很推荐这个麻烦的方法")]),a._v(" "),e("h4",{attrs:{id:"_4-2-1-download-source-code"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-download-source-code"}},[a._v("#")]),a._v(" 4.2.1 Download source code")]),a._v(" "),e("p",[a._v("Please follow our GitHub webpage to download the latest released version and development version. （说明一下：一般安装released version，比较稳定）")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /some/workspace\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#这里的意思是让你去工作目录下，不是说cd到这个不存在的目录")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/deepmodeling/deepmd-kit.git deepmd-kit\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" deepmd-kit\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("deepmd_source_dir")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#这里告诉了deepmd源码需要安装在什么位置")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("h4",{attrs:{id:"_4-2-2-install-the-python-interface"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-install-the-python-interface"}},[a._v("#")]),a._v(" 4.2.2 Install the python interface")]),a._v(" "),e("h5",{attrs:{id:"_4-2-2-1-install-the-tensorflow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-1-install-the-tensorflow"}},[a._v("#")]),a._v(" 4.2.2.1 Install the tensorflow")]),a._v(" "),e("p",[a._v("First, check the python version on your machine")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("python "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("We follow the virtual environment approach to install TensorFlow’s Python interface. The full instruction can be found on the official TensorFlow website. TensorFlow 1.8 or later is supported. Now we assume that the Python interface will be installed to the virtual environment directory $tensorflow_venv")]),a._v(" "),e("p",[a._v("(简而言之，就是把tensorflow安装到了$tensorflow_venv这个虚拟环境中)")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("virtualenv "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" python3 "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$tensorflow_venv")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$tensorflow_venv")]),a._v("/bin/activate\npip "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--upgrade")]),a._v(" pip\npip "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--upgrade")]),a._v(" tensorflow\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("It is important that every time a new shell is started and one wants to use DeePMD-kit, the virtual environment should be activated by")]),a._v(" "),e("p",[a._v("(每次使用DeePMD-kit时，激活虚拟环境)")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$tensorflow_venv")]),a._v("/bin/activate\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("补充退出虚拟环境的命令")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("deactivate\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("测试这一步完成的命令（在虚拟环境中操作）")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("python "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))"')]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装正确时的输出：一个浮点数的输出（结果值取决于随机数生成的结果）")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装错误时的可能输出：ModuleNotFoundError: No module named 'tensorflow'")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("h5",{attrs:{id:"_4-2-2-2-install-the-deepmd-kit-s-python-interface"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-2-install-the-deepmd-kit-s-python-interface"}},[a._v("#")]),a._v(" 4.2.2.2 Install the DeePMD-kit’s python interface")]),a._v(" "),e("p",[a._v("很麻烦，自己看官网")]),a._v(" "),e("h4",{attrs:{id:"_4-2-3-install-the-c-interface"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-3-install-the-c-interface"}},[a._v("#")]),a._v(" 4.2.3 Install the C++ interface")]),a._v(" "),e("p",[a._v("很麻烦，自己看官网配置")]),a._v(" "),e("h3",{attrs:{id:"_4-3-在conda环境中安装deepmd-kit-十分推荐"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-在conda环境中安装deepmd-kit-十分推荐"}},[a._v("#")]),a._v(" 4.3 在Conda环境中安装DeePMD-kit （十分推荐）")]),a._v(" "),e("p",[a._v("优点：可以将DeepMD的环境和其他计算软件隔离开来，并且简化安装步骤。")]),a._v(" "),e("p",[a._v("提醒：conda这玩意卡住是很正常的，安装时需要耐心等待。")]),a._v(" "),e("p",[a._v("推荐创建GPU版本的DeePMD-kit和LAMMPS的Conda环境")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("conda create "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" deepmd\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#新建一个虚拟环境库")]),a._v("\nconda activate deepmd\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#进入这个新建的虚拟环境")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("conda "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" deepmodeling::cudatoolkit\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装cuda工具")]),a._v("\nnvidia-smi\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#现实GPU信息和CUDA版本，如果第一行显示CUDA Version: 12.4，则说明安装成功")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#以及可以看到在2024年值$2,700的NVIDIA GeForce RTX 4090")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("conda "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" deepmodeling::libdeepmd"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.2")]),a._v(".10"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("*gpu\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装可能要用到的库")]),a._v("\nconda "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" deepmodeling::deepmd-kit"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.2")]),a._v(".10"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("*gpu\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#下载GPU版本deepmd-kit，最好和libdeepmd版本一致")]),a._v("\nconda "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" deepmodeling::horovod\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#Distributed training framework for TensorFlow, Keras, PyTorch, and Apache MXNet.")]),a._v("\nconda "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" deepmodeling::lammps\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#下载lammps软件")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);