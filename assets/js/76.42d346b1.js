(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{439:function(a,s,e){"use strict";e.r(s);var t=e(7),n=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"lammps在使用dp势函数时的debug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lammps在使用dp势函数时的debug"}},[a._v("#")]),a._v(" LAMMPS在使用DP势函数时的Debug")]),a._v(" "),s("h2",{attrs:{id:"_1-deepmd势函数的元素序号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-deepmd势函数的元素序号"}},[a._v("#")]),a._v(" 1. Deepmd势函数的元素序号")]),a._v(" "),s("p",[a._v("Deepmd的势函数是有默认元素排序的")]),a._v(" "),s("p",[a._v("我的的训练集的map是(Co-0, Ni-1, Pd-2, Cr-3, Fe-4)，这一步是之前使用dpdata插件得到的")]),a._v(" "),s("p",[a._v("我的的势函数训练的input.json中的map是(Cr-0, Fe-1, Co-2, Ni-3, Pd-4)，这一步是我自己设置的，理论上应该相互匹配，但是之前的工作中没有注意这一点。")]),a._v(" "),s("h2",{attrs:{id:"_2-lammps中的元素序号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-lammps中的元素序号"}},[a._v("#")]),a._v(" 2. LAMMPS中的元素序号")]),a._v(" "),s("p",[a._v("在我初步对于Ni和Pd进行单轴拉伸时，两者的序号都是1，而且结果几乎相同，而且与Ni的密度泛函计算结果接近。")]),a._v(" "),s("p",[a._v("因此我认为原子序号的不匹配可能是我这一错误的最大原因，因此我先尝试将Pd的需要修改为2，然后再进行一次测试。")]),a._v(" "),s("h3",{attrs:{id:"_2-1-修改原子序号代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-修改原子序号代码"}},[a._v("#")]),a._v(" 2.1 修改原子序号代码")]),a._v(" "),s("p",[a._v("使用文本编辑器打开Pd_32000.lmp文件，做以下修改：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("       32000  atoms\n           2  atom types\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Masses\n\n            1   58.69000000             # Ni\n            2   106.42000000            # Pd\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("这里通过lammps进行原子序号的修改:")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("units           metal\nboundary        p p p\natom_style      atomic\ntimestep        0.001\nneighbor        0.2 bin\nread_data       Pd_32000.lmp\nset             type 1 type/ratio 2 1.0 8793\nwrite_data      Pd_32000_2.lmp\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("运行命令")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("lmp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" in.exchange\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" lmp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" in.test "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" output.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"_3-修改pd原子序号后的实验结果分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改pd原子序号后的实验结果分析"}},[a._v("#")]),a._v(" 3. 修改Pd原子序号后的实验结果分析")]),a._v(" "),s("h3",{attrs:{id:"_3-1-初步修改结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-初步修改结果"}},[a._v("#")]),a._v(" 3.1 初步修改结果")]),a._v(" "),s("p",[a._v("好的地方：的确在结果方面得到了不同；")]),a._v(" "),s("p",[a._v("坏的地方：结构优化后的结果是bcc结构，由于bcc结构没有做过应力应变曲线，所以最终得到的应力应变曲线也比较抽象。")]),a._v(" "),s("p",[a._v("结构优化后的构型图片：")]),a._v(" "),s("p",[a._v("测试应力应变曲线：")]),a._v(" "),s("p",[a._v("此外，元素1对应一个基态为fcc的构型或者难以从fcc相变为其他相的元素，元素2对应一个基态为bcc的构型，那么我现在更愿意相信最终的结果是(Cr-1, Fe-2, Co-3, Ni-4, Pd-5)")]),a._v(" "),s("h3",{attrs:{id:"_3-2-deepmd-kit官网查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-deepmd-kit官网查询"}},[a._v("#")]),a._v(" 3.2 Deepmd-kit官网查询")]),a._v(" "),s("p",[a._v("我再次翻阅了Deepmd-kit的相关描述，发现在某个不起眼的位置，进行了下述说明：")]),a._v(" "),s("p",[a._v("总而言之，根据type_map的设置与否这个前提分了两种情况（明显能够看出来还是设置一下比较好）")]),a._v(" "),s("p",[a._v("在设置type_map后，势函数应该就是和type_map一致，而且默认序号也是从1-5")]),a._v(" "),s("p",[a._v("如果希望调整默认序号，则需要从pair_coeff后面自己修改，保证pair_coeff后面跟着的修改元素顺序和lammps设置的顺序相同即可。")]),a._v(" "),s("p",[a._v("也就是之前算的和Ni比较接近的结果可能用的是Cr元素的势函数，并且可能Cr元素在300K下的fcc相比较难相变为bcc相，而Fe元素就比较容易。")]),a._v(" "),s("h3",{attrs:{id:"_3-3-继续修改原子序号debug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-继续修改原子序号debug"}},[a._v("#")]),a._v(" 3.3 继续修改原子序号debug")]),a._v(" "),s("p",[a._v("使用文本编辑器打开Pd_32000.lmp文件，做以下修改：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("       32000  atoms\n           5  atom types\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Masses\n\n            1   52.00000000             # Cr   \n            2   55.85000000             # Fe\n            3   58.93000000             # Co\n            4   58.69000000             # Ni\n            5   106.42000000            # Pd\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("p",[a._v("这里通过lammps进行原子序号的修改:")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("units           metal\nboundary        p p p\natom_style      atomic\ntimestep        0.001\nneighbor        0.2 bin\nread_data       Pd_32000.lmp\nset             type 1 type/ratio 5 1.0 8793\nwrite_data      Pd_32000_2.lmp\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("运行命令")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("lmp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" in.exchange\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" lmp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" in.test "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" output.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"_4-最终debug成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-最终debug成功"}},[a._v("#")]),a._v(" 4. 最终Debug成功")]),a._v(" "),s("p",[a._v("基于我仔细阅读Deepmd官网并修改元素顺序后，终于得到了正确的结果：")]),a._v(" "),s("p",[a._v("应力应变曲线图(Pd)：")]),a._v(" "),s("p",[a._v("不仅表现出线弹性，而且模量和dft计算结果相似。")]),a._v(" "),s("p",[a._v("（知乎上的经验帖，需要以批判的眼光去看待）")])])}),[],!1,null,null,null);s.default=n.exports}}]);