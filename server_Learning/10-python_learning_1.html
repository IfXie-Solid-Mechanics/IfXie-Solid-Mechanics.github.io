<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python学习笔记-1 | IfXie&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
    <meta name="description" content="The only way to do great work is to love what you do.">
    <meta name="keywords" content="Solid Mechanics, Molecular Dynamics, First-principles calculations, AI4S, Linux systems, anime, fitness, indie games on Steam">
    
    <link rel="preload" href="/assets/css/0.styles.2f1e26cc.css" as="style"><link rel="preload" href="/assets/js/app.315c8cdd.js" as="script"><link rel="preload" href="/assets/js/2.d14395a5.js" as="script"><link rel="preload" href="/assets/js/101.bed104a2.js" as="script"><link rel="prefetch" href="/assets/js/1.cb40a502.js"><link rel="prefetch" href="/assets/js/10.a06bb1eb.js"><link rel="prefetch" href="/assets/js/100.d8f86cd3.js"><link rel="prefetch" href="/assets/js/102.b4d03739.js"><link rel="prefetch" href="/assets/js/103.95a18d9e.js"><link rel="prefetch" href="/assets/js/104.61995454.js"><link rel="prefetch" href="/assets/js/105.f008ed9c.js"><link rel="prefetch" href="/assets/js/106.1cbca132.js"><link rel="prefetch" href="/assets/js/107.96c5e311.js"><link rel="prefetch" href="/assets/js/108.ff8dd297.js"><link rel="prefetch" href="/assets/js/109.0e2b5264.js"><link rel="prefetch" href="/assets/js/11.1844feda.js"><link rel="prefetch" href="/assets/js/110.bb6d4bd4.js"><link rel="prefetch" href="/assets/js/111.1555679e.js"><link rel="prefetch" href="/assets/js/112.84b3d458.js"><link rel="prefetch" href="/assets/js/12.5db82bdc.js"><link rel="prefetch" href="/assets/js/13.d991dbfd.js"><link rel="prefetch" href="/assets/js/14.4991c582.js"><link rel="prefetch" href="/assets/js/15.8f20b0e9.js"><link rel="prefetch" href="/assets/js/16.da931f02.js"><link rel="prefetch" href="/assets/js/17.ddf6882c.js"><link rel="prefetch" href="/assets/js/18.394e8f93.js"><link rel="prefetch" href="/assets/js/19.166843f8.js"><link rel="prefetch" href="/assets/js/20.5908d844.js"><link rel="prefetch" href="/assets/js/21.d07aa552.js"><link rel="prefetch" href="/assets/js/22.966d7d6b.js"><link rel="prefetch" href="/assets/js/23.2c78a6e6.js"><link rel="prefetch" href="/assets/js/24.a4af1871.js"><link rel="prefetch" href="/assets/js/25.a3177620.js"><link rel="prefetch" href="/assets/js/26.b3ad2bf7.js"><link rel="prefetch" href="/assets/js/27.7bc151ef.js"><link rel="prefetch" href="/assets/js/28.977c97b1.js"><link rel="prefetch" href="/assets/js/29.fd6d35c5.js"><link rel="prefetch" href="/assets/js/3.9ed0fe0f.js"><link rel="prefetch" href="/assets/js/30.4f515c34.js"><link rel="prefetch" href="/assets/js/31.363934fa.js"><link rel="prefetch" href="/assets/js/32.e3f7e7f5.js"><link rel="prefetch" href="/assets/js/33.7ede003b.js"><link rel="prefetch" href="/assets/js/34.3cdd74d8.js"><link rel="prefetch" href="/assets/js/35.0ca46ff5.js"><link rel="prefetch" href="/assets/js/36.788b0036.js"><link rel="prefetch" href="/assets/js/37.4b8ecb30.js"><link rel="prefetch" href="/assets/js/38.948a8a9c.js"><link rel="prefetch" href="/assets/js/39.5833df35.js"><link rel="prefetch" href="/assets/js/4.d61d4261.js"><link rel="prefetch" href="/assets/js/40.0f43e9df.js"><link rel="prefetch" href="/assets/js/41.084d235c.js"><link rel="prefetch" href="/assets/js/42.a644c0c0.js"><link rel="prefetch" href="/assets/js/43.36b0501a.js"><link rel="prefetch" href="/assets/js/44.43176a68.js"><link rel="prefetch" href="/assets/js/45.3f7ff765.js"><link rel="prefetch" href="/assets/js/46.14c3c913.js"><link rel="prefetch" href="/assets/js/47.6b2ba057.js"><link rel="prefetch" href="/assets/js/48.9ce9355f.js"><link rel="prefetch" href="/assets/js/49.41b4f42a.js"><link rel="prefetch" href="/assets/js/5.ee32a04c.js"><link rel="prefetch" href="/assets/js/50.74e7f808.js"><link rel="prefetch" href="/assets/js/51.88a96ee0.js"><link rel="prefetch" href="/assets/js/52.adbed44f.js"><link rel="prefetch" href="/assets/js/53.1584fc24.js"><link rel="prefetch" href="/assets/js/54.c74a8657.js"><link rel="prefetch" href="/assets/js/55.c2c9e357.js"><link rel="prefetch" href="/assets/js/56.72792fbb.js"><link rel="prefetch" href="/assets/js/57.13e54b0b.js"><link rel="prefetch" href="/assets/js/58.1a8945be.js"><link rel="prefetch" href="/assets/js/59.23298057.js"><link rel="prefetch" href="/assets/js/6.e2fe98e2.js"><link rel="prefetch" href="/assets/js/60.5cbf2f68.js"><link rel="prefetch" href="/assets/js/61.09ffef37.js"><link rel="prefetch" href="/assets/js/62.ca082c0b.js"><link rel="prefetch" href="/assets/js/63.3d352ffa.js"><link rel="prefetch" href="/assets/js/64.96e33fa6.js"><link rel="prefetch" href="/assets/js/65.09b96199.js"><link rel="prefetch" href="/assets/js/66.af6869c4.js"><link rel="prefetch" href="/assets/js/67.dbfeb4ae.js"><link rel="prefetch" href="/assets/js/68.a6077bd3.js"><link rel="prefetch" href="/assets/js/69.02482c3b.js"><link rel="prefetch" href="/assets/js/7.f80011a2.js"><link rel="prefetch" href="/assets/js/70.762a2e57.js"><link rel="prefetch" href="/assets/js/71.43f8cb3d.js"><link rel="prefetch" href="/assets/js/72.7e02860e.js"><link rel="prefetch" href="/assets/js/73.5c8874d0.js"><link rel="prefetch" href="/assets/js/74.738551f7.js"><link rel="prefetch" href="/assets/js/75.ff5b07b1.js"><link rel="prefetch" href="/assets/js/76.37b179d5.js"><link rel="prefetch" href="/assets/js/77.8cbb7dd8.js"><link rel="prefetch" href="/assets/js/78.b335eb6e.js"><link rel="prefetch" href="/assets/js/79.f252fb6f.js"><link rel="prefetch" href="/assets/js/80.df5a0c1b.js"><link rel="prefetch" href="/assets/js/81.9c4a74fa.js"><link rel="prefetch" href="/assets/js/82.dd99a6da.js"><link rel="prefetch" href="/assets/js/83.375bfef6.js"><link rel="prefetch" href="/assets/js/84.c203297b.js"><link rel="prefetch" href="/assets/js/85.65859667.js"><link rel="prefetch" href="/assets/js/86.17a85554.js"><link rel="prefetch" href="/assets/js/87.f05e0fc1.js"><link rel="prefetch" href="/assets/js/88.53cf85f1.js"><link rel="prefetch" href="/assets/js/89.eae87e63.js"><link rel="prefetch" href="/assets/js/90.cfffede4.js"><link rel="prefetch" href="/assets/js/91.d4ee7592.js"><link rel="prefetch" href="/assets/js/92.e4319e49.js"><link rel="prefetch" href="/assets/js/93.7d763845.js"><link rel="prefetch" href="/assets/js/94.347d21f0.js"><link rel="prefetch" href="/assets/js/95.238a781b.js"><link rel="prefetch" href="/assets/js/96.04132eb7.js"><link rel="prefetch" href="/assets/js/97.a700d650.js"><link rel="prefetch" href="/assets/js/98.62afc795.js"><link rel="prefetch" href="/assets/js/99.db431a00.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.b562965b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2f1e26cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="IfXie's Blog" class="logo"> <span class="site-name can-hide">IfXie's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/VASP_Learning/" class="nav-link">
  VASP学习路线
</a></div> <a href="https://github.com/IfXie-Solid-Mechanics/my-first-repo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/VASP_Learning/" class="nav-link">
  VASP学习路线
</a></div> <a href="https://github.com/IfXie-Solid-Mechanics/my-first-repo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python学习笔记-1</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/server_Learning/10-python_learning_1.html#_1-前言" class="sidebar-link">1. 前言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_1-1-开始" class="sidebar-link">1.1 开始</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_1-1-1-交互式对话" class="sidebar-link" style="padding-left:3rem;">1.1.1 交互式对话</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_1-1-2-第一个例子" class="sidebar-link" style="padding-left:3rem;">1.1.2 第一个例子</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_1-1-3-小结" class="sidebar-link" style="padding-left:3rem;">1.1.3 小结</a></li></ul></li><li><a href="/server_Learning/10-python_learning_1.html#_2-编程要素" class="sidebar-link">2. 编程要素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_2-1-表达式" class="sidebar-link">2.1 表达式</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_2-2-导入库函数" class="sidebar-link">2.2 导入库函数</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_2-3-名称与环境" class="sidebar-link">2.3 名称与环境</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_2-3-1-名称与函数绑定" class="sidebar-link" style="padding-left:3rem;">2.3.1 名称与函数绑定</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_2-3-2-绑定更新机制" class="sidebar-link" style="padding-left:3rem;">2.3.2 绑定更新机制</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_2-3-3-多重赋值优先计算右侧" class="sidebar-link" style="padding-left:3rem;">2.3.3 多重赋值优先计算右侧</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_2-4-非纯函数-print" class="sidebar-link">2.4 非纯函数 print</a></li></ul></li><li><a href="/server_Learning/10-python_learning_1.html#_3-定义新的函数" class="sidebar-link">3. 定义新的函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-1-函数定义的语法" class="sidebar-link">3.1 函数定义的语法</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-2-再谈环境" class="sidebar-link">3.2 再谈环境</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-2-1-frame" class="sidebar-link" style="padding-left:3rem;">3.2.1 Frame</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-2-2-内置名称与绑定名称" class="sidebar-link" style="padding-left:3rem;">3.2.2 内置名称与绑定名称</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-2-3-函数签名" class="sidebar-link" style="padding-left:3rem;">3.2.3 函数签名</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-3-调用用户定义的函数" class="sidebar-link">3.3 调用用户定义的函数</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-3-1-局部帧" class="sidebar-link" style="padding-left:3rem;">3.3.1 局部帧</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-3-2-函数被调用时的环境" class="sidebar-link" style="padding-left:3rem;">3.3.2 函数被调用时的环境</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-3-3-局部赋值" class="sidebar-link" style="padding-left:3rem;">3.3.3 局部赋值</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-3-4-名称求解-name-evaluation" class="sidebar-link" style="padding-left:3rem;">3.3.4 名称求解（Name Evaluation）</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_3-4-运算符" class="sidebar-link">3.4 运算符</a></li></ul></li><li><a href="/server_Learning/10-python_learning_1.html#_4-控制" class="sidebar-link">4. 控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_4-1-语句" class="sidebar-link">4.1 语句</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_4-2-条件语句" class="sidebar-link">4.2 条件语句</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_4-3-while语句" class="sidebar-link">4.3 while语句</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_4-4-断言语句" class="sidebar-link">4.4 断言语句</a></li></ul></li><li><a href="/server_Learning/10-python_learning_1.html#_5-高阶函数" class="sidebar-link">5. 高阶函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_5-1-函数的形参是一个函数" class="sidebar-link">5.1 函数的形参是一个函数</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_5-2-函数的嵌套定义" class="sidebar-link">5.2 函数的嵌套定义</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_5-3-lambda表达式-了解" class="sidebar-link">5.3 lambda表达式（了解）</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_5-4-柯里化-了解" class="sidebar-link">5.4 柯里化（了解）</a></li><li class="sidebar-sub-header"><a href="/server_Learning/10-python_learning_1.html#_5-5-函数装饰器-了解" class="sidebar-link">5.5 函数装饰器（了解）</a></li></ul></li><li><a href="/server_Learning/10-python_learning_1.html#_6-递归函数" class="sidebar-link">6. 递归函数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/server_Learning/10-python_learning_1.html#_7-其他" class="sidebar-link">7. 其他</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content single-column"><div class="main-content"><div class="theme-default-content custom-content content__default"><h1 id="python学习笔记-1"><a href="#python学习笔记-1" class="header-anchor">#</a> Python学习笔记-1</h1> <p>鸣谢：https://www.composingprograms.com/</p> <h2 id="_1-前言"><a href="#_1-前言" class="header-anchor">#</a> 1. 前言</h2> <p>本系列教程参考伯克利 CS61 系列的第一门课程，是很多大佬的python入门课。</p> <p>在当下的大AI时代，掌握python开发是一项非常重要的能力。</p> <p>本篇教程适用于有一定编程基础的同学，会重点讲解python的需要着重注意的语法、概念，以及分布式计算。</p> <h3 id="_1-1-开始"><a href="#_1-1-开始" class="header-anchor">#</a> 1.1 开始</h3> <h4 id="_1-1-1-交互式对话"><a href="#_1-1-1-交互式对话" class="header-anchor">#</a> 1.1.1 交互式对话</h4> <p>要启动交互式会话，请在终端 (Mac/Unix/Linux) 中键入<code>python3</code>。</p> <p>如果你看到了 Python 提示符<code>&gt;&gt;&gt;</code>，则已经成功启动交互式会话。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span>
<span class="token number">4</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>交互控制：每个会话都会保留键入内容的历史记录，可以通过如下方式浏览该历史记录：</p> <p><code>&lt;Control&gt;-P</code>：上一个；</p> <p><code>&lt;Control&gt;-N</code>：下一个；</p> <p><code>&lt;Control&gt;-D</code>：退出并删除记录。</p> <p>在某些系统中，也可以适用上下箭头键来代替上下翻阅记录。</p> <h4 id="_1-1-2-第一个例子"><a href="#_1-1-2-第一个例子" class="header-anchor">#</a> 1.1.2 第一个例子</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> urlopen
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>是一个<code>import</code>语句，它会导入一个用于“访问互联网数据”的功能，该功能特别提供了一个名为<code>urlopen</code>的函数，可以访问<code>URL</code>（也就是访问互联网上的某个网址）上的内容。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> shakespeare <span class="token operator">=</span> urlopen<span class="token punctuation">(</span><span class="token string">'https://www.composingprograms.com/shakespeare.txt'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这是一个赋值语句，将函数<code>urlopen</code>赋值给到<code>shakespeare</code>，函数是本章的主题。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> words <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span>shakespeare<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这也是一个赋值语句，将<code>words</code>与莎士比亚戏剧中出现的共 33,721 个单词的集合相连。</p> <p><code>set</code> 就是一种对象，支持如计算交集和集合关系（membership）等运算，对象这一概念将是第二章的主题。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>w <span class="token keyword">for</span> w <span class="token keyword">in</span> words <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">6</span> <span class="token keyword">and</span> w<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">in</span> words<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">'redder'</span><span class="token punctuation">,</span> <span class="token string">'drawer'</span><span class="token punctuation">,</span> <span class="token string">'reward'</span><span class="token punctuation">,</span> <span class="token string">'diaper'</span><span class="token punctuation">,</span> <span class="token string">'repaid'</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这是一个表达式，当你在交互式会话中输入表达式时，Python 会在下一行打印它的值。而表达式与解释器的相关概念将会在第三章重点讨论。</p> <h4 id="_1-1-3-小结"><a href="#_1-1-3-小结" class="header-anchor">#</a> 1.1.3 小结</h4> <p>本书的讨论思路：</p> <ol><li><p>第一章讨论语句与函数（本章）</p></li> <li><p>第二章讨论对象</p></li> <li><p>第三章深入讨论表达式和解释器</p></li> <li><p>第四章讨论数据处理</p></li></ol> <h2 id="_2-编程要素"><a href="#_2-编程要素" class="header-anchor">#</a> 2. 编程要素</h2> <h3 id="_2-1-表达式"><a href="#_2-1-表达式" class="header-anchor">#</a> 2.1 表达式</h3> <p>最简单的表达式：键入十进制数字；</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">42</span>
<span class="token number">42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>中缀表达式(infix notation)：符号在数字中间，最符合数学直观；</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">8</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">16</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">32</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">64</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">128</span>
<span class="token number">0.9921875</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>函数表达式：拥有返回值的函数作为表达式</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">7.5</span><span class="token punctuation">,</span> <span class="token number">9.5</span><span class="token punctuation">)</span>
<span class="token number">9.5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>复合表达式：嵌套（nested）表达式</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-2-导入库函数"><a href="#_2-2-导入库函数" class="header-anchor">#</a> 2.2 导入库函数</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> math <span class="token keyword">import</span> sqrt
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> sqrt<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span>
<span class="token number">16.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>math</code>是一个函数库，也称为一个python模块(module)</p> <p>而<code>from math import sqrt</code>语句则是先指定<code>模块</code>，再指定从模块中调用的<code>函数名称</code>。</p> <p>所有开源库的源码都在官方网址：https://docs.python.org/3/library/index.html</p> <h3 id="_2-3-名称与环境"><a href="#_2-3-名称与环境" class="header-anchor">#</a> 2.3 名称与环境</h3> <p>通过<code>赋值</code>这一抽象方法可以实现<code>名称</code>与<code>值</code>的<code>绑定</code>。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> radius <span class="token operator">=</span> <span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而将名称与值绑定，之后通过名称检索可能的值，就意味着解释器必须维护某种内存来记录名称、值和绑定，这种内存就是<code>环境</code>（environment）。</p> <h4 id="_2-3-1-名称与函数绑定"><a href="#_2-3-1-名称与函数绑定" class="header-anchor">#</a> 2.3.1 名称与函数绑定</h4> <p>在python中，名称还可以与函数绑定</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">max</span>
<span class="token operator">&lt;</span>built<span class="token operator">-</span><span class="token keyword">in</span> function <span class="token builtin">max</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token builtin">max</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f
<span class="token operator">&lt;</span>built<span class="token operator">-</span><span class="token keyword">in</span> function <span class="token builtin">max</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>再次赋值后，名称又重新与值绑定</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f
<span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">max</span> <span class="token operator">=</span> <span class="token number">5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">max</span>
<span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_2-3-2-绑定更新机制"><a href="#_2-3-2-绑定更新机制" class="header-anchor">#</a> 2.3.2 绑定更新机制</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> radius <span class="token operator">=</span> <span class="token number">10</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> area <span class="token operator">=</span> pi <span class="token operator">*</span> radius <span class="token operator">*</span> radius
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> area
<span class="token number">314.1592653589793</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> radius <span class="token operator">=</span> <span class="token number">11</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> area
<span class="token number">314.1592653589793</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> area <span class="token operator">=</span> pi <span class="token operator">*</span> radius <span class="token operator">*</span> radius
<span class="token number">380.132711084365</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>可以看到我们中间修改<code>radius</code>的绑定数值后，<code>area</code>的绑定数值却没有发生改变，需要通过再次对<code>area</code>进行赋值才能够改变其绑定数值。</p> <h4 id="_2-3-3-多重赋值优先计算右侧"><a href="#_2-3-3-多重赋值优先计算右侧" class="header-anchor">#</a> 2.3.3 多重赋值优先计算右侧</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4.5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> y<span class="token punctuation">,</span> x <span class="token operator">=</span> x<span class="token punctuation">,</span> y
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x
<span class="token number">4.5</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> y
<span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>通过<code>,</code>可以实现多重赋值，并且会优先对右侧变量进行计算后赋值，所以不等价于分步赋值。</p> <h3 id="_2-4-非纯函数-print"><a href="#_2-4-非纯函数-print" class="header-anchor">#</a> 2.4 非纯函数 print</h3> <p>首先，区分两种函数：</p> <ol><li><p><code>纯函数</code>：函数有一些输入（参数）并返回一些输出（调用返回结果）；</p></li> <li><p><code>非纯函数</code>：除了返回值外，调用一个非纯函数还会产生其他改变解释器和计算机的状态的副作用（side effect）。一个常见的副作用就是使用 <code>print</code>函数产生（非返回值的）额外输出。</p></li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token boolean">None</span> <span class="token boolean">None</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>print的返回值是None，而在屏幕上输出只是它的side effect，综合前面的知识可以思考下面这个案例的原理：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> two <span class="token operator">=</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>two<span class="token punctuation">)</span>
<span class="token boolean">None</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-定义新的函数"><a href="#_3-定义新的函数" class="header-anchor">#</a> 3. 定义新的函数</h2> <h3 id="_3-1-函数定义的语法"><a href="#_3-1-函数定义的语法" class="header-anchor">#</a> 3.1 函数定义的语法</h3> <p>一个简单的例子：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> mul<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>函数定义包含 def 语句、<code>&lt;name 函数名&gt;</code> 和一个以<code>逗号</code>分隔的 <code>&lt;formal parameters 形式参数&gt;</code> 列表，然后是一个被称为函数体的 <code>return</code> 语句，它指定了调用函数时要计算的表达式，也就是函数的 <code>&lt;return expression 返回表达式&gt;</code> ：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>formal parameters<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token keyword">return</span> expression<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在定义函数时，即可将函数名与函数进行<code>绑定</code>，有关<code>绑定</code>的知识复习可以参考下面的代码：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g
<span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">g</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> h <span class="token operator">+</span> i
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> g<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-2-再谈环境"><a href="#_3-2-再谈环境" class="header-anchor">#</a> 3.2 再谈环境</h3> <p>思考：如果形参与内置函数同名怎么办？两个函数可以共享名称而不会混淆吗？要解决这些问题，我们必须更详细地描述环境。</p> <h4 id="_3-2-1-frame"><a href="#_3-2-1-frame" class="header-anchor">#</a> 3.2.1 Frame</h4> <p>Frame常被国内程序员翻译为<code>帧</code>或<code>栈帧</code>，很少被翻做<code>框架</code>。</p> <p>目前我们的代码和讨论仅在<code>全局帧</code>（Global frame）这一范围。</p> <p><code>赋值</code>和<code>导入</code>语句会将条目添加到当前环境的<code>第一帧</code>。</p> <p>通过环境图可以显示了当前环境中的绑定，环境图网址(https://pythontutor.com/cp/composingprograms.html#mode=edit)（当然很多IDE中也可以查看动态环境图）</p> <h4 id="_3-2-2-内置名称与绑定名称"><a href="#_3-2-2-内置名称与绑定名称" class="header-anchor">#</a> 3.2.2 内置名称与绑定名称</h4> <p>frame中存储的名称是<code>绑定名称（bound name）</code></p> <p>而函数本身有一个自己的定义名称，叫做<code>内在名称（intrinsic name）</code></p> <p>两者之间有一个区别：不同的绑定名称可能指的是同一个函数，但该函数本身只有一个内在名称，可以多阅读<code>环境图</code>来理解两者之间的不同。下面这个例子很好地体现了'内置名称'的不变性与<code>绑定名称</code>的失效。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f <span class="token operator">=</span> <span class="token builtin">max</span>
<span class="token builtin">max</span> <span class="token operator">=</span> <span class="token number">3</span>
result <span class="token operator">=</span> f<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># Causes an error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3-2-3-函数签名"><a href="#_3-2-3-函数签名" class="header-anchor">#</a> 3.2.3 函数签名</h4> <p>函数签名：每个函数允许采用的参数数量有所不同。为了跟踪这些要求，我们绘制了每个函数的名称及其形式参数。用户定义的函数<code>square</code>只需要<code>x</code>一个参数，提供或多或少的参数都将导致错误。对函数形式参数的描述被称为<code>函数的签名</code>。</p> <p>函数<code>max</code>可以接受任意数量的参数，所以它被呈现为<code>max(...)</code>。因为原始函数从未明确定义，所以无论采用多少个参数，所有的内置函数都将呈现为 <code>&lt;name&gt;(...)</code>。</p> <h3 id="_3-3-调用用户定义的函数"><a href="#_3-3-调用用户定义的函数" class="header-anchor">#</a> 3.3 调用用户定义的函数</h3> <h4 id="_3-3-1-局部帧"><a href="#_3-3-1-局部帧" class="header-anchor">#</a> 3.3.1 局部帧</h4> <p>当调用用户自己定义的函数时，涉及一个概念，名为<code>局部帧(local frame)</code>，它只能被该函数访问。通过一些实参调用用户定义的函数：</p> <ol><li><p>在新的局部帧中，将实参绑定到函数的形参上。</p></li> <li><p>在以此帧开始的环境中执行函数体。</p></li></ol> <p>函数的每个实例都有自己独立的局部帧，这里有两个方面需要注意：</p> <ol><li><p>不同的函数被调用时，局域帧肯定是独立的；</p></li> <li><p>同一个函数，在第一次被调用和第二次被调用时，局域帧也是独立的。</p></li></ol> <p>在局域帧中的变量也被称为局域变量。</p> <h4 id="_3-3-2-函数被调用时的环境"><a href="#_3-3-2-函数被调用时的环境" class="header-anchor">#</a> 3.3.2 函数被调用时的环境</h4> <p>求值函数体的环境由两个帧组成：一是包含形式参数绑定的局部帧，其次是包含其他所有内容的全局帧。</p> <p>从下面的代码的<code>环境图</code>中可以很好地理解这一概念</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> operator <span class="token keyword">import</span> add<span class="token punctuation">,</span> mul
<span class="token keyword">def</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> mul<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">sum_squares</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> add<span class="token punctuation">(</span>square<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> square<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>
	
result <span class="token operator">=</span> sum_squares<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-3-3-局部赋值"><a href="#_3-3-3-局部赋值" class="header-anchor">#</a> 3.3.3 局部赋值</h4> <p>由于调用自己定义的函数时，不包含全局帧的变量，因此赋值语句只能改变局域帧的变量，不能改变到全局帧的变量，这是一个重要概念！</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> operator <span class="token keyword">import</span> mul
a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    a <span class="token operator">=</span> x <span class="token operator">+</span> y
    a <span class="token operator">=</span> mul<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment"># 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>但是你可以调用全局帧中的值:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> operator <span class="token keyword">import</span> mul
a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> x <span class="token operator">+</span> y
<span class="token keyword">print</span><span class="token punctuation">(</span>f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 13</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>进一步理解找最近帧的名称及其对应变量：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> operator <span class="token keyword">import</span> mul
a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    a <span class="token operator">=</span> <span class="token number">3</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> x <span class="token operator">+</span> y
<span class="token keyword">print</span><span class="token punctuation">(</span>f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_3-3-4-名称求解-name-evaluation"><a href="#_3-3-4-名称求解-name-evaluation" class="header-anchor">#</a> 3.3.4 名称求解（Name Evaluation）</h4> <p>环境中帧的顺序会影响通过表达式查找名称而返回的值。我们之前说过，名称会求解为当前环境中与该名称关联的值。我们现在可以更准确地说：</p> <p>在环境中寻找该名称，最早找到的含有该名称的帧，其里边绑定的值就是这个名称的计算结果。</p> <p>环境、名称和函数的概念框架构成了求解模型，虽然一些机械细节仍未指定（例如，如何实现绑定），但我们的模型确实精准地描述了解释器如何求解调用表达式。在第三章中，我们将看到这个模型如何作为蓝图来实现编程语言的工作解释器。</p> <h3 id="_3-4-运算符"><a href="#_3-4-运算符" class="header-anchor">#</a> 3.4 运算符</h3> <p>简单的加减乘都可以直接通过键入中缀表达式实现：</p> <p>对于除法，Python 提供了两个中缀运算符：<code>/</code>和<code>//</code>。前者是常规除法，因此即使除数可以整除被除数，它也会产生<code>浮点数（十进制小数）</code>：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token operator">/</span> <span class="token number">4</span>
<span class="token number">1.25</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">8</span> <span class="token operator">/</span> <span class="token number">4</span>
<span class="token number">2.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>运算<code>//</code>会将结果向下舍入到一个整数：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token operator">//</span> <span class="token number">4</span>
<span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">5</span> <span class="token operator">//</span> <span class="token number">4</span>
<span class="token operator">-</span><span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>对于简单的数学运算，Python 惯例上更喜欢使用运算符而不是调用表达式。</p> <h2 id="_4-控制"><a href="#_4-控制" class="header-anchor">#</a> 4. 控制</h2> <h3 id="_4-1-语句"><a href="#_4-1-语句" class="header-anchor">#</a> 4.1 语句</h3> <p>在之前我们已经使用过了赋值语句，return语句、def语句，那么语句真正的定义是什么呢？</p> <p>通常，Python 代码是一系列语句。简单语句是不以冒号结尾的单行，而由其他语句（简单语句和复合语句）组成被称为复合语句。复合语句通常跨越多行，以单行头部（header）开始，并以冒号结尾，其中冒号标识语句的类型。头部和缩进的句体（suite）一起称为子句。复合语句由一个或多个子句组成：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&lt;</span>header<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    <span class="token operator">&lt;</span>statement<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>statement<span class="token operator">&gt;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span>separating header<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    <span class="token operator">&lt;</span>statement<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>statement<span class="token operator">&gt;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_4-2-条件语句"><a href="#_4-2-条件语句" class="header-anchor">#</a> 4.2 条件语句</h3> <p>例子：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">absolute_value</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Compute abs(x).&quot;&quot;&quot;</span>
    <span class="token keyword">if</span> x <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> x
    <span class="token keyword">elif</span> x <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">0</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token operator">-</span>x

result <span class="token operator">=</span> absolute_value<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>语法：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> <span class="token operator">&lt;</span>expression<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    <span class="token operator">&lt;</span>suite<span class="token operator">&gt;</span>
<span class="token keyword">elif</span> <span class="token operator">&lt;</span>expression<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    <span class="token operator">&lt;</span>suite<span class="token operator">&gt;</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token operator">&lt;</span>suite<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>python内置的比较运算符 &gt;, &lt;, &gt; =, &lt;=, ==, !=</p> <p>布尔运算符，与或非的表达式，与C++的形式不同：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token boolean">True</span> <span class="token keyword">and</span> <span class="token boolean">False</span>
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token boolean">True</span> <span class="token keyword">or</span> <span class="token boolean">False</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">not</span> <span class="token boolean">False</span>
<span class="token boolean">True</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-3-while语句"><a href="#_4-3-while语句" class="header-anchor">#</a> 4.3 while语句</h3> <p>斐波那契数列求前几项例子：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">fib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Compute the nth Fibonacci number, for n &gt;= 2.&quot;&quot;&quot;</span>
    pred<span class="token punctuation">,</span> curr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>   <span class="token comment"># Fibonacci numbers 1 and 2</span>
    k <span class="token operator">=</span> <span class="token number">2</span>               <span class="token comment"># Which Fib number is curr?</span>
    <span class="token keyword">while</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">:</span>
        pred<span class="token punctuation">,</span> curr <span class="token operator">=</span> curr<span class="token punctuation">,</span> pred <span class="token operator">+</span> curr
        k <span class="token operator">=</span> k <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">return</span> curr

result <span class="token operator">=</span> fib<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>语法:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">while</span> <span class="token operator">&lt;</span>expression<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    <span class="token operator">&lt;</span>suite<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>不会终止的<code>while</code>语句被称为无限循环（infinite loop）。键入<code>&lt;Control&gt;-C</code>可以强制 Python 停止循环。</p> <h3 id="_4-4-断言语句"><a href="#_4-4-断言语句" class="header-anchor">#</a> 4.4 断言语句</h3> <p><code>assert</code>语句常常用于程序的测试当中：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">fib_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">assert</span> fib<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'第二个斐波那契数应该是 1'</span>
        <span class="token keyword">assert</span> fib<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'第三个斐波那契数应该是 1'</span>
        <span class="token keyword">assert</span> fib<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">7778742049</span><span class="token punctuation">,</span> <span class="token string">'在第五十个斐波那契数发生 Error'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当被断言的表达式的计算结果为真值时，执行断言语句无效。而当它是假值时，assert 会导致错误，使程序停止执行，并显示引号内的文本（引号用双引号和单引号都可以，但需要保持前后一致）</p> <p>断言编写经验：当在文件中而不是直接在解释器中编写python断言时，测试通常是在<code>同一个文件</code>或带有后缀<code>_test.py</code>的相邻文件中编写的。</p> <h2 id="_5-高阶函数"><a href="#_5-高阶函数" class="header-anchor">#</a> 5. 高阶函数</h2> <h3 id="_5-1-函数的形参是一个函数"><a href="#_5-1-函数的形参是一个函数" class="header-anchor">#</a> 5.1 函数的形参是一个函数</h3> <p>例子：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">summation</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> term<span class="token punctuation">)</span><span class="token punctuation">:</span>
    total<span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword">while</span> k <span class="token operator">&lt;=</span> n<span class="token punctuation">:</span>
        total<span class="token punctuation">,</span> k <span class="token operator">=</span> total <span class="token operator">+</span> term<span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> k <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">return</span> total

<span class="token keyword">def</span> <span class="token function">cube</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>x<span class="token operator">*</span>x

<span class="token keyword">def</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>x

<span class="token keyword">def</span> <span class="token function">sum_cubes</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> summation<span class="token punctuation">(</span>n<span class="token punctuation">,</span> cube<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">sum_square</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> summation<span class="token punctuation">(</span>n<span class="token punctuation">,</span> square<span class="token punctuation">)</span>

result_1 <span class="token operator">=</span> sum_cubes<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
result_2 <span class="token operator">=</span> sum_square<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>作用：增强函数的<code>抽象</code>能力，使得函数可以称为一个<code>通用函数</code>，比较著名的一个例子就是迭代求解器。</p> <p>语法：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token operator">&lt;</span>term<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    total<span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token keyword">while</span> k <span class="token operator">&lt;=</span> n<span class="token punctuation">:</span>
        total<span class="token punctuation">,</span> k <span class="token operator">=</span> total <span class="token operator">+</span> <span class="token operator">&lt;</span>term<span class="token operator">&gt;</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> k <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">return</span> total
<span class="token comment">#&lt;term&gt;可以是任意名称，对应被调用函数名的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-2-函数的嵌套定义"><a href="#_5-2-函数的嵌套定义" class="header-anchor">#</a> 5.2 函数的嵌套定义</h3> <p>从上述例子中，我们已经可以看出函数可以作为形参被调用。但是如上述例子的编码方式会使得全局帧变得十分混乱，毕竟全局帧的内在名称具有唯一性，所以对于<code>通用函数</code>调用的函数往往都是定义在局域帧中，这种方式是函数中嵌套函数，被称为函数的嵌套定义：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">improve</span><span class="token punctuation">(</span>update<span class="token punctuation">,</span> close<span class="token punctuation">,</span> guess<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token keyword">not</span> close<span class="token punctuation">(</span>guess<span class="token punctuation">)</span><span class="token punctuation">:</span>
        guess <span class="token operator">=</span> update<span class="token punctuation">(</span>guess<span class="token punctuation">)</span>
    <span class="token keyword">return</span> guess

<span class="token keyword">def</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">sqrt_update</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> average<span class="token punctuation">(</span>x<span class="token punctuation">,</span> a<span class="token operator">/</span>x<span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">sqrt_close</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> approx_eq<span class="token punctuation">(</span>x <span class="token operator">*</span> x<span class="token punctuation">,</span> a<span class="token punctuation">)</span>
    <span class="token keyword">return</span> improve<span class="token punctuation">(</span>sqrt_update<span class="token punctuation">,</span> sqrt_close<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>词法作用域（Lexical scope）</code>：局部定义的函数也可以访问整个定义作用域内的名称绑定。在此示例中，<code>sqrt_update</code> 引用名称 <code>a</code>，它是其封闭函数 <code>sqrt</code> 的形式参数。这种在嵌套定义之间共享名称的规则称为<code>词法作用域</code>。最重要的是，内部函数可以访问定义它们的环境中的名称（而不是它们被调用的位置）。</p> <p>我们需要实现两个扩展使环境模型启用词法作用域：</p> <ol><li><p>每个用户定义的函数都有一个父环境：定义它的环境。</p></li> <li><p>调用用户定义的函数时，其局部帧会继承其父环境。</p></li></ol> <p>这里的 sqrt_update 函数自带了一些数据：a 在定义它的环境中引用的值，因为它以这种方式“封装”信息，所以局部定义的函数通常被称为<code>闭包（closures）</code>。</p> <p>总结：<code>闭包</code>一路继承可以继承到全局帧，但是它改不了除了自己以外的其他帧的数值。</p> <h3 id="_5-3-lambda表达式-了解"><a href="#_5-3-lambda表达式-了解" class="header-anchor">#</a> 5.3 lambda表达式（了解）</h3> <p>需求：计算<code>a * b + c * d</code>而不必命名子表达式<code>a*b</code>或<code>c*d</code>或完整的表达式，使得名称空间更加简洁。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">*</span> x
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s
<span class="token operator">&lt;</span>function <span class="token operator">&lt;</span><span class="token keyword">lambda</span><span class="token operator">&gt;</span> at <span class="token number">0xf3f490</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
<span class="token number">144</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>本质上，适用lambda定义了一个临时函数，在frame中看到lambda即可识别出这是临时函数。</p> <p>的确采用lambda可以让名称空间稍稍简洁，但是有时会大大地增加代码的阅读难度，比如下面这一代码没有任何语法错误，看起来也比较简洁，但是人们往往难以理解：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> compose1 <span class="token operator">=</span> <span class="token keyword">lambda</span> f<span class="token punctuation">,</span>g<span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> f<span class="token punctuation">(</span>g<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>术语 lambda 是历史上的偶然事件，它源于书面数学符号与早期排版系统的不兼容性。往往仅在希望省掉比较简单的表达式时才采用。</p> <h3 id="_5-4-柯里化-了解"><a href="#_5-4-柯里化-了解" class="header-anchor">#</a> 5.4 柯里化（了解）</h3> <p>这种写法会见到，但是我自己是不常写的，看到能认即可，只写例子：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">curried_pow</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">h</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token builtin">pow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
        <span class="token keyword">return</span> h
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> curried_pow<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token number">8</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">map_to_range</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">while</span> start <span class="token operator">&lt;</span> end<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span>
            start <span class="token operator">=</span> start <span class="token operator">+</span> <span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> map_to_range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> curried_pow<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">4</span>
<span class="token number">8</span>
<span class="token number">16</span>
<span class="token number">32</span>
<span class="token number">64</span>
<span class="token number">128</span>
<span class="token number">256</span>
<span class="token number">512</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>逆柯里化，差不多：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">curry2</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;返回给定的双参数函数的柯里化版本&quot;&quot;&quot;</span>
        <span class="token keyword">def</span> <span class="token function">g</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">def</span> <span class="token function">h</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> f<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
            <span class="token keyword">return</span> h
        <span class="token keyword">return</span> g
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">uncurry2</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;返回给定的柯里化函数的双参数版本&quot;&quot;&quot;</span>
        <span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> g<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
        <span class="token keyword">return</span> f
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> pow_curried <span class="token operator">=</span> curry2<span class="token punctuation">(</span><span class="token builtin">pow</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> pow_curried<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">32</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> map_to_range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> pow_curried<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">4</span>
<span class="token number">8</span>
<span class="token number">16</span>
<span class="token number">32</span>
<span class="token number">64</span>
<span class="token number">128</span>
<span class="token number">256</span>
<span class="token number">512</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> uncurry2<span class="token punctuation">(</span>pow_curried<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">32</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_5-5-函数装饰器-了解"><a href="#_5-5-函数装饰器-了解" class="header-anchor">#</a> 5.5 函数装饰器（了解）</h3> <p>首先，这个是完全能够被等价表达的，比如</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">trace</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">wrapped</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'-&gt; '</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token string">'('</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token string">')'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> fn<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
        <span class="token keyword">return</span> wrapped

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> @trace
    <span class="token keyword">def</span> <span class="token function">triple</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">3</span> <span class="token operator">*</span> x

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> triple<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>function triple at <span class="token number">0x102a39848</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span> <span class="token number">12</span> <span class="token punctuation">)</span>
<span class="token number">36</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>是完全等价于</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">triple</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">3</span> <span class="token operator">*</span> x
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> triple <span class="token operator">=</span> trace<span class="token punctuation">(</span>triple<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>明显后者更为简洁，而且后者的帧关系也更加清楚。</p> <p>总之看到python里面出现<code>@</code>时，查询一下函数装饰器即可，完全不推荐自己在写代码时使用这一语法。</p> <h2 id="_6-递归函数"><a href="#_6-递归函数" class="header-anchor">#</a> 6. 递归函数</h2> <p>一般递归：函数中调用自己，需要注意截断条件；</p> <p>互递归：两个函数被调用，比如奇偶递归；</p> <p>树递归：return时被多次同一个函数递归，类似斐波那契数列，return时被递归两次同一个函数</p> <h2 id="_7-其他"><a href="#_7-其他" class="header-anchor">#</a> 7. 其他</h2> <p>python中的注释，有多行注释和单行注释，在下面这个例子中有明显体现</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">def</span> <span class="token function">pressure</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> t<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;计算理想气体的压力，单位为帕斯卡

        使用理想气体定律

        v -- 气体体积，单位为立方米
        t -- 绝对温度，单位为开尔文
        n -- 气体粒子
        &quot;&quot;&quot;</span>
        k <span class="token operator">=</span> <span class="token number">1.38e-23</span>  <span class="token comment"># 玻尔兹曼常数</span>
        <span class="token keyword">return</span> n <span class="token operator">*</span> k <span class="token operator">*</span> t <span class="token operator">/</span> v
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>当然一般不写中文注释，这里是随便找的一个。</p></div> <footer class="page-edit" style="margin:0;"><div class="edit-link"><a href="https://github.com/IfXie-Solid-Mechanics/my-first-repo/edit/master/server_Learning/10-python_learning_1.md" target="_blank" rel="noopener noreferrer">完善页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----></div></div>  <main class="footer"> <div class="copy-right"><span class="name"> 编程导航   |     </span> <a target="_blank" rel="noreferrer">
          
        </a></div></main></main> <aside class="page-sidebar"> <div class="page-side-toolbar"></div>  </aside></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.315c8cdd.js" defer></script><script src="/assets/js/2.d14395a5.js" defer></script><script src="/assets/js/101.bed104a2.js" defer></script>
  </body>
</html>
