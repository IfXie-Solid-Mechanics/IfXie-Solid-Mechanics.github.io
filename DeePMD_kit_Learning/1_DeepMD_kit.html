<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DeePMD-kit学习笔记-1 | IfXie&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
    <meta name="description" content="The only way to do great work is to love what you do.">
    <meta name="keywords" content="Solid Mechanics, Molecular Dynamics, First-principles calculations, AI4S, Linux systems, anime, fitness, indie games on Steam">
    
    <link rel="preload" href="/assets/css/0.styles.2f1e26cc.css" as="style"><link rel="preload" href="/assets/js/app.589abb2b.js" as="script"><link rel="preload" href="/assets/js/2.f45b5605.js" as="script"><link rel="preload" href="/assets/js/72.f1ffe57f.js" as="script"><link rel="prefetch" href="/assets/js/1.801b7a90.js"><link rel="prefetch" href="/assets/js/10.b5e43998.js"><link rel="prefetch" href="/assets/js/100.cf80c92c.js"><link rel="prefetch" href="/assets/js/101.2a7b42d1.js"><link rel="prefetch" href="/assets/js/102.5c10b0b1.js"><link rel="prefetch" href="/assets/js/103.3769bac7.js"><link rel="prefetch" href="/assets/js/104.095bf3f8.js"><link rel="prefetch" href="/assets/js/105.2ff18395.js"><link rel="prefetch" href="/assets/js/106.5279913a.js"><link rel="prefetch" href="/assets/js/107.84fde6b2.js"><link rel="prefetch" href="/assets/js/108.704b567e.js"><link rel="prefetch" href="/assets/js/109.bde7621d.js"><link rel="prefetch" href="/assets/js/11.8e125483.js"><link rel="prefetch" href="/assets/js/110.1961f2fd.js"><link rel="prefetch" href="/assets/js/111.a0be2032.js"><link rel="prefetch" href="/assets/js/112.cd337935.js"><link rel="prefetch" href="/assets/js/113.6fe9958d.js"><link rel="prefetch" href="/assets/js/114.a046fd61.js"><link rel="prefetch" href="/assets/js/115.c41ed550.js"><link rel="prefetch" href="/assets/js/116.a49e283a.js"><link rel="prefetch" href="/assets/js/117.c1dc0105.js"><link rel="prefetch" href="/assets/js/118.cf729619.js"><link rel="prefetch" href="/assets/js/119.3a0b7857.js"><link rel="prefetch" href="/assets/js/12.6064e743.js"><link rel="prefetch" href="/assets/js/120.229e301e.js"><link rel="prefetch" href="/assets/js/121.94cc6ed5.js"><link rel="prefetch" href="/assets/js/122.4efc5d2a.js"><link rel="prefetch" href="/assets/js/123.cb4b8c53.js"><link rel="prefetch" href="/assets/js/124.5f3e295a.js"><link rel="prefetch" href="/assets/js/125.7d96855e.js"><link rel="prefetch" href="/assets/js/126.61410b6c.js"><link rel="prefetch" href="/assets/js/127.596f65d9.js"><link rel="prefetch" href="/assets/js/128.08bae261.js"><link rel="prefetch" href="/assets/js/129.ba6e7f25.js"><link rel="prefetch" href="/assets/js/13.2ce55401.js"><link rel="prefetch" href="/assets/js/130.7d7bc490.js"><link rel="prefetch" href="/assets/js/131.e803f6cb.js"><link rel="prefetch" href="/assets/js/132.0ef61f84.js"><link rel="prefetch" href="/assets/js/133.a2ba7fa3.js"><link rel="prefetch" href="/assets/js/134.1f413dda.js"><link rel="prefetch" href="/assets/js/135.9a46916f.js"><link rel="prefetch" href="/assets/js/136.32398099.js"><link rel="prefetch" href="/assets/js/137.52fb5399.js"><link rel="prefetch" href="/assets/js/138.9338f149.js"><link rel="prefetch" href="/assets/js/139.46540ca6.js"><link rel="prefetch" href="/assets/js/14.a4b28b04.js"><link rel="prefetch" href="/assets/js/140.bcd68d4d.js"><link rel="prefetch" href="/assets/js/141.8eda6b52.js"><link rel="prefetch" href="/assets/js/142.5f4c58d2.js"><link rel="prefetch" href="/assets/js/143.cc022214.js"><link rel="prefetch" href="/assets/js/144.e682f794.js"><link rel="prefetch" href="/assets/js/145.3d99d5aa.js"><link rel="prefetch" href="/assets/js/146.2b9db1f9.js"><link rel="prefetch" href="/assets/js/147.2907b0a4.js"><link rel="prefetch" href="/assets/js/148.3fde65dd.js"><link rel="prefetch" href="/assets/js/149.0601f61e.js"><link rel="prefetch" href="/assets/js/15.eff5e4d3.js"><link rel="prefetch" href="/assets/js/150.bce8541b.js"><link rel="prefetch" href="/assets/js/151.96b416ad.js"><link rel="prefetch" href="/assets/js/152.920bc2fe.js"><link rel="prefetch" href="/assets/js/153.a17c29b8.js"><link rel="prefetch" href="/assets/js/154.24b94995.js"><link rel="prefetch" href="/assets/js/155.7dbdd56c.js"><link rel="prefetch" href="/assets/js/16.e3634679.js"><link rel="prefetch" href="/assets/js/17.128bedd1.js"><link rel="prefetch" href="/assets/js/18.06f950f2.js"><link rel="prefetch" href="/assets/js/19.033ac2ff.js"><link rel="prefetch" href="/assets/js/20.61228368.js"><link rel="prefetch" href="/assets/js/21.0c64ffdc.js"><link rel="prefetch" href="/assets/js/22.c9810d18.js"><link rel="prefetch" href="/assets/js/23.e6fd0951.js"><link rel="prefetch" href="/assets/js/24.7981b1c9.js"><link rel="prefetch" href="/assets/js/25.df7beb24.js"><link rel="prefetch" href="/assets/js/26.0cdf6e24.js"><link rel="prefetch" href="/assets/js/27.6b2a8cfc.js"><link rel="prefetch" href="/assets/js/28.06b1fb2b.js"><link rel="prefetch" href="/assets/js/29.b52c60be.js"><link rel="prefetch" href="/assets/js/3.7d1deaf3.js"><link rel="prefetch" href="/assets/js/30.589ba4ed.js"><link rel="prefetch" href="/assets/js/31.f6a0e771.js"><link rel="prefetch" href="/assets/js/32.8d83ffe0.js"><link rel="prefetch" href="/assets/js/33.81773d2b.js"><link rel="prefetch" href="/assets/js/34.a5d4179f.js"><link rel="prefetch" href="/assets/js/35.83c9fa91.js"><link rel="prefetch" href="/assets/js/36.c39db5dc.js"><link rel="prefetch" href="/assets/js/37.7d35af5a.js"><link rel="prefetch" href="/assets/js/38.5f692e78.js"><link rel="prefetch" href="/assets/js/39.2240078b.js"><link rel="prefetch" href="/assets/js/4.d0cf812b.js"><link rel="prefetch" href="/assets/js/40.2a5d4d34.js"><link rel="prefetch" href="/assets/js/41.945f3b73.js"><link rel="prefetch" href="/assets/js/42.36157266.js"><link rel="prefetch" href="/assets/js/43.7f12ecaf.js"><link rel="prefetch" href="/assets/js/44.2467ed34.js"><link rel="prefetch" href="/assets/js/45.fc92ecbc.js"><link rel="prefetch" href="/assets/js/46.f325c846.js"><link rel="prefetch" href="/assets/js/47.bfb74ce3.js"><link rel="prefetch" href="/assets/js/48.abc727a9.js"><link rel="prefetch" href="/assets/js/49.cf6ebf90.js"><link rel="prefetch" href="/assets/js/5.b83ec9ec.js"><link rel="prefetch" href="/assets/js/50.26a58917.js"><link rel="prefetch" href="/assets/js/51.f0299e10.js"><link rel="prefetch" href="/assets/js/52.31428a56.js"><link rel="prefetch" href="/assets/js/53.8c89a117.js"><link rel="prefetch" href="/assets/js/54.d0f2b09c.js"><link rel="prefetch" href="/assets/js/55.7fd74713.js"><link rel="prefetch" href="/assets/js/56.e4fb6ff1.js"><link rel="prefetch" href="/assets/js/57.d70679d3.js"><link rel="prefetch" href="/assets/js/58.5056a4b9.js"><link rel="prefetch" href="/assets/js/59.93eb941f.js"><link rel="prefetch" href="/assets/js/6.3f1930f4.js"><link rel="prefetch" href="/assets/js/60.4ba39c7a.js"><link rel="prefetch" href="/assets/js/61.b365bbc3.js"><link rel="prefetch" href="/assets/js/62.62b10b7c.js"><link rel="prefetch" href="/assets/js/63.6706b941.js"><link rel="prefetch" href="/assets/js/64.58a542e0.js"><link rel="prefetch" href="/assets/js/65.efaa3728.js"><link rel="prefetch" href="/assets/js/66.e8499156.js"><link rel="prefetch" href="/assets/js/67.7bed2e1c.js"><link rel="prefetch" href="/assets/js/68.70439dc7.js"><link rel="prefetch" href="/assets/js/69.38d2b30d.js"><link rel="prefetch" href="/assets/js/7.88079b69.js"><link rel="prefetch" href="/assets/js/70.4cb23298.js"><link rel="prefetch" href="/assets/js/71.4f041213.js"><link rel="prefetch" href="/assets/js/73.5366798f.js"><link rel="prefetch" href="/assets/js/74.5cf229cf.js"><link rel="prefetch" href="/assets/js/75.17f98b34.js"><link rel="prefetch" href="/assets/js/76.cc2420ec.js"><link rel="prefetch" href="/assets/js/77.a06670e4.js"><link rel="prefetch" href="/assets/js/78.3b82bf29.js"><link rel="prefetch" href="/assets/js/79.b5af2cba.js"><link rel="prefetch" href="/assets/js/80.43112583.js"><link rel="prefetch" href="/assets/js/81.3808548e.js"><link rel="prefetch" href="/assets/js/82.ddf391b0.js"><link rel="prefetch" href="/assets/js/83.b78db84f.js"><link rel="prefetch" href="/assets/js/84.e213ede1.js"><link rel="prefetch" href="/assets/js/85.9a2c86c8.js"><link rel="prefetch" href="/assets/js/86.c2e5a0d7.js"><link rel="prefetch" href="/assets/js/87.8f610881.js"><link rel="prefetch" href="/assets/js/88.67adda59.js"><link rel="prefetch" href="/assets/js/89.9d3bb0df.js"><link rel="prefetch" href="/assets/js/90.0b712a10.js"><link rel="prefetch" href="/assets/js/91.c256d60e.js"><link rel="prefetch" href="/assets/js/92.b51655d4.js"><link rel="prefetch" href="/assets/js/93.0728eca3.js"><link rel="prefetch" href="/assets/js/94.80f57191.js"><link rel="prefetch" href="/assets/js/95.4977220f.js"><link rel="prefetch" href="/assets/js/96.2a28e5b2.js"><link rel="prefetch" href="/assets/js/97.5ef563c8.js"><link rel="prefetch" href="/assets/js/98.8e41576e.js"><link rel="prefetch" href="/assets/js/99.3b286939.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d9992789.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2f1e26cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="IfXie's Blog" class="logo"> <span class="site-name can-hide">IfXie's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/VASP_Learning/" class="nav-link">
  VASP学习路线
</a></div> <a href="https://github.com/IfXie-Solid-Mechanics/my-first-repo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/VASP_Learning/" class="nav-link">
  VASP学习路线
</a></div> <a href="https://github.com/IfXie-Solid-Mechanics/my-first-repo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DeePMD-kit学习笔记-1</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_1-什么是dp" class="sidebar-link">1.什么是DP</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_2-其他工具" class="sidebar-link">2.其他工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_2-1-dpdata" class="sidebar-link">2.1 dpdata</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_2-2-dp-gen" class="sidebar-link">2.2 DP-GEN</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_2-3-dp-library" class="sidebar-link">2.3 DP Library</a></li></ul></li><li><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_3-安装前准备" class="sidebar-link">3.安装前准备</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_3-1-conda-pip-environments" class="sidebar-link">3.1 Conda/pip environments</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_3-1-1-how-to-setup-a-conda-pip-base-environment" class="sidebar-link" style="padding-left:3rem;">3.1.1 How to setup a conda/pip base environment?</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_3-1-2-what-is-the-difference-between-conda-and-pip" class="sidebar-link" style="padding-left:3rem;">3.1.2 What is the difference between conda and pip?</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_3-1-3-how-can-i-check-what-packages-have-been-installed" class="sidebar-link" style="padding-left:3rem;">3.1.3 How can I check what packages have been installed?</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_3-1-4-how-to-create-a-new-conda-pip-environment" class="sidebar-link" style="padding-left:3rem;">3.1.4 How to create a new conda/pip environment?</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_3-1-5-why-do-i-need-multiple-environments-instead-of-one" class="sidebar-link" style="padding-left:3rem;">3.1.5 Why do I need multiple environments instead of one?</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_3-2-安装dpdata" class="sidebar-link">3.2 安装dpdata</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_3-3-安装dpgen" class="sidebar-link">3.3 安装DPGen</a></li></ul></li><li><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_4-具体安装" class="sidebar-link">4.具体安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_4-1-easy-install" class="sidebar-link">4.1 Easy Install</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_4-2-install-from-source-code-不推荐这个方法" class="sidebar-link">4.2 Install from source code （不推荐这个方法）</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_4-2-1-download-source-code" class="sidebar-link" style="padding-left:3rem;">4.2.1 Download source code</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_4-2-2-install-the-python-interface" class="sidebar-link" style="padding-left:3rem;">4.2.2 Install the python interface</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_4-2-2-1-install-the-tensorflow" class="sidebar-link" style="padding-left:4rem;">4.2.2.1 Install the tensorflow</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_4-2-2-2-install-the-deepmd-kit-s-python-interface" class="sidebar-link" style="padding-left:4rem;">4.2.2.2 Install the DeePMD-kit’s python interface</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_4-2-3-install-the-c-interface" class="sidebar-link" style="padding-left:3rem;">4.2.3 Install the C++ interface</a></li><li class="sidebar-sub-header"><a href="/DeePMD_kit_Learning/1_DeepMD_kit.html#_4-3-在conda环境中安装deepmd-kit-十分推荐" class="sidebar-link">4.3 在Conda环境中安装DeePMD-kit （十分推荐）</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content single-column"><div class="main-content"><div class="theme-default-content custom-content content__default"><h1 id="deepmd-kit学习笔记-1"><a href="#deepmd-kit学习笔记-1" class="header-anchor">#</a> DeePMD-kit学习笔记-1</h1> <h2 id="_1-什么是dp"><a href="#_1-什么是dp" class="header-anchor">#</a> 1.什么是DP</h2> <p>深度势能 (DP) 是一种通过深度神经网络拟合原子间相互作用势（也叫势能面，potential energy surface, PES）的方法。训练数据集通常是由基于密度泛函理论（density functional theory, DFT）的方法计算获得。 相关软件是DeePMD-kit。DP方法通用性高、准确性高、计算效率高且并行效率高，是最受欢迎的机器学习势之一。</p> <h2 id="_2-其他工具"><a href="#_2-其他工具" class="header-anchor">#</a> 2.其他工具</h2> <h3 id="_2-1-dpdata"><a href="#_2-1-dpdata" class="header-anchor">#</a> 2.1 dpdata</h3> <p>dpdata是对数据集进行处理的工具</p> <h3 id="_2-2-dp-gen"><a href="#_2-2-dp-gen" class="header-anchor">#</a> 2.2 DP-GEN</h3> <p>DP-GEN是“Deep Potential GENerator”的缩写，是在同步学习框架下设计的DP模型自动生成器。在DP-GEN中，数据集的增加和DP模型的改进是同时进行的。DP-GEN软件可以自动管理整个流程，包括准备作业脚本 (例如训练模型，探索构型空间、检查现有模型在构型空间的准确性并筛选出准确性不足的候选构型，以及通过DFT计算给候选构型打标签), 将作业提交到云计算或其他高性能计算集群上, 并监控工作状态。下图显示了一个典型的DP-GEN自动迭代流程，包括三个典型的过程：</p> <p>1.训练一组DP模型（通常是四个），这些模型将被用来探索构型空间并检查探索的构型是否能够被准确预测。</p> <p>2.采用其中一个DP模型探索构型空间，并通过比较不同DP模型之间的预测偏差来检查每个构型的预测精度。</p> <p>3.选择一些预测精度较低的构型作为候选构型，并通过DFT计算给候选构型打标签。</p> <h3 id="_2-3-dp-library"><a href="#_2-3-dp-library" class="header-anchor">#</a> 2.3 DP Library</h3> <p>DFT方法计算量大且非常耗时。因此，我们建立了DP library共享DFT计算源数据，以避免由于重复计算造成的浪费，并鼓励大家贡献自己的DFT源数据，丰富数据集，并不断改进DP模型。有了这个基础设施，对构型空间不同区域的采样可以由不同的研究人员贡献，如下图所示。当数据集更加丰富时，可以自动重新训练和改进DP模型。最后，在DP library上会得到许多DP模型。这些模型适用于大多数问题，以便研究人员可以将精力集中于应用DP模型解决实际问题，而不是耗费在构建DP模型中。当我们需要一个DP模型时，可以按照以下步骤检查应该做什么：</p> <p>1.检查是否存在训练好的模型，直接从DP library下载模型</p> <p>2.如果不存在，检查是否DP library上是否存在可用的DFT数据集，自己添加一些数据并训练一个模型</p> <p>3.如果既没有训练好的模型也没有任何有价值的数据，则从头开始生成数据并从头开始训练模型</p> <p>4.如果你愿意，将DFT源数据和模型贡献给DP library，以方便更多人使用你的数据或者模型。</p> <h2 id="_3-安装前准备"><a href="#_3-安装前准备" class="header-anchor">#</a> 3.安装前准备</h2> <ol><li><p>安装第一性原理计算软件，这里推荐VASP，详细的安装教程可阅读我对于VASP安装的md教学文件；</p></li> <li><p>安装分子动力学计算软件，这里推荐LAMMPS，并且推荐基于conda安装lammps-dp使用于DeePMD；</p></li> <li><p>安装conda环境，主要原因是dpdata\deepmd-kit\dpgen大部分都是基于python写的，因此需要配置一个python环境，而python环境的配置一般偏好使用conda来进行配置，常用的conda环境配置有miniforge和anaconda两种，本文介绍的是miniforge，这也是DeePMD官网介绍的；</p></li> <li><p>安装CUDA，这里的技巧类似LAMMPS，在安装DPGen的离线安装包时，顺便把CUDA装上。</p></li> <li><p>安装dpdata</p></li></ol> <h3 id="_3-1-conda-pip-environments"><a href="#_3-1-conda-pip-environments" class="header-anchor">#</a> 3.1 Conda/pip environments</h3> <h4 id="_3-1-1-how-to-setup-a-conda-pip-base-environment"><a href="#_3-1-1-how-to-setup-a-conda-pip-base-environment" class="header-anchor">#</a> 3.1.1 How to setup a conda/pip base environment?</h4> <p>1.对于environment的定义：</p> <p>An environment is a directory that contains a specific collection of packages that you have installed. Different environments are isolated from each other. A base environment is required before setting up multiple environments.</p> <p>2.第一步，下载Anaconda3:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> https://repo.anaconda.com/archive/Anaconda3-2024.10-1-Linux-x86_64.sh
<span class="token comment">#网页下载anaconda</span>
<span class="token function">bash</span> Anaconda3-2024.10-1-Linux-x86_64.sh
<span class="token comment">#执行安装</span>
<span class="token comment">#先默认回车进入</span>
<span class="token comment">#第一次yes直接默认就行</span>
<span class="token comment">#第二次回车，可以留意一下anaconda的安装路径，可以先修改路径再回车</span>
<span class="token comment">#第三次yes是在.bashrc中自动加入conda环境</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>After installation, you can activate the base environment using</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">source</span> ~/.bashrc
<span class="token comment">#当然，也可以把bashrc中的代码复制到一个单独的sh文件中作为激活命令</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>conda deactivate
<span class="token comment">#退出base环境，或者从其他虚拟环境退到base环境的命令</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Now you can use conda install or pip install command to install conda or pip packages.</p> <h4 id="_3-1-2-what-is-the-difference-between-conda-and-pip"><a href="#_3-1-2-what-is-the-difference-between-conda-and-pip" class="header-anchor">#</a> 3.1.2 What is the difference between conda and pip?</h4> <p>The largest difference is that pip can only install Python packages, but conda can install any packages including C, C++, and Fortran packages without Python involved. We suggest reading the Anaconda blog for more information.</p> <h4 id="_3-1-3-how-can-i-check-what-packages-have-been-installed"><a href="#_3-1-3-how-can-i-check-what-packages-have-been-installed" class="header-anchor">#</a> 3.1.3 How can I check what packages have been installed?</h4> <p>Run <strong>conda list</strong> and <strong>pip list</strong>, which show all conda/pip packages that have been installed in the current environment.</p> <h4 id="_3-1-4-how-to-create-a-new-conda-pip-environment"><a href="#_3-1-4-how-to-create-a-new-conda-pip-environment" class="header-anchor">#</a> 3.1.4 How to create a new conda/pip environment?</h4> <p>To create a conda/pip environment named my_env, run</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>conda create <span class="token parameter variable">-n</span> my_env <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.11</span>
<span class="token comment">#conda create：创建一个新的Conda环境</span>
<span class="token comment">#-n my_env：指定新环境的名称为 my_env，你可以根据需求将 my_env 替换为其他名称</span>
<span class="token comment">#python=3.11：指定环境中Python的版本为 3.11。Conda会自动下载并安装Python 3.11版本到新环境中</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Now you can activate the environment using</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>conda activate my_env
<span class="token comment">#在终端或命令行的提示符中，会显示你当前处于 my_env 环境下，通常会看到 (my_env) 出现在命令行开头</span>
<span class="token comment">#此时，所有 Python 命令都会使用 my_env 中的 Python 解释器和包，而不会影响到全局环境</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">source</span> activate my_env
<span class="token comment">#一个较早版本的命令，Conda 4.4及以后版本不推荐</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_3-1-5-why-do-i-need-multiple-environments-instead-of-one"><a href="#_3-1-5-why-do-i-need-multiple-environments-instead-of-one" class="header-anchor">#</a> 3.1.5 Why do I need multiple environments instead of one?</h4> <p>Due to multiple reasons, dependencies of packages often conflict with each other. For example, Python 3.11 and 3.12 cannot be installed in the same environment; CUDA 11 and CUDA 12 packages cannot be installed in the same environment; Open MPI and MPICH cannot be installed in the same environment; packages built against zlib 1.2 and 1.3 cannot be installed in the same environment. While conda-forge has tried its best to reduce package conflicts, it may still happen when installing multiple packages. Installing different packages into different environments will reduce the risk of meeting the conflict packages.</p> <h3 id="_3-2-安装dpdata"><a href="#_3-2-安装dpdata" class="header-anchor">#</a> 3.2 安装dpdata</h3> <p>在conda环境中，执行命令</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>pip3 <span class="token function">install</span> dpdata
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-3-安装dpgen"><a href="#_3-3-安装dpgen" class="header-anchor">#</a> 3.3 安装DPGen</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/deepmodeling/dpgen
pip <span class="token function">install</span> ./dpgen

<span class="token comment">#记录第一次安装出现以下报错</span>
<span class="token comment">#ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.tensorflow 2.9.0 requires flatbuffers&lt;2,&gt;=1.12, but you have flatbuffers 2.0 which is incompatible.tensorflow 2.9.0 requires tensorflow-estimator&lt;2.10.0,&gt;=2.9.0rc0, but you have tensorflow-estimator 2.12.0 which is incompatible.</span>

<span class="token comment">#但是我自己执行tensorflow命令是没问题的</span>
python <span class="token parameter variable">-c</span> <span class="token string">&quot;import tensorflow as tf; print(tf.__version__)&quot;</span>
<span class="token comment">#正常输出2.9.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_4-具体安装"><a href="#_4-具体安装" class="header-anchor">#</a> 4.具体安装</h2> <h3 id="_4-1-easy-install"><a href="#_4-1-easy-install" class="header-anchor">#</a> 4.1 Easy Install</h3> <ol><li><p>没有必要安装Easy Install版本；</p></li> <li><p>但是网络上部分教程是Easy Install安装教程，特此提醒。</p></li></ol> <h3 id="_4-2-install-from-source-code-不推荐这个方法"><a href="#_4-2-install-from-source-code-不推荐这个方法" class="header-anchor">#</a> 4.2 Install from source code （不推荐这个方法）</h3> <p>如果对于Linux环境配置十分熟悉，否则不是很推荐这个麻烦的方法</p> <h4 id="_4-2-1-download-source-code"><a href="#_4-2-1-download-source-code" class="header-anchor">#</a> 4.2.1 Download source code</h4> <p>Please follow our GitHub webpage to download the latest released version and development version. （说明一下：一般安装released version，比较稳定）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /some/workspace
<span class="token comment">#这里的意思是让你去工作目录下，不是说cd到这个不存在的目录</span>
<span class="token function">git</span> clone https://github.com/deepmodeling/deepmd-kit.git deepmd-kit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> deepmd-kit
<span class="token assign-left variable">deepmd_source_dir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token comment">#这里告诉了deepmd源码需要安装在什么位置</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_4-2-2-install-the-python-interface"><a href="#_4-2-2-install-the-python-interface" class="header-anchor">#</a> 4.2.2 Install the python interface</h4> <h5 id="_4-2-2-1-install-the-tensorflow"><a href="#_4-2-2-1-install-the-tensorflow" class="header-anchor">#</a> 4.2.2.1 Install the tensorflow</h5> <p>First, check the python version on your machine</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>python <span class="token parameter variable">--version</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>We follow the virtual environment approach to install TensorFlow’s Python interface. The full instruction can be found on the official TensorFlow website. TensorFlow 1.8 or later is supported. Now we assume that the Python interface will be installed to the virtual environment directory $tensorflow_venv</p> <p>(简而言之，就是把tensorflow安装到了$tensorflow_venv这个虚拟环境中)</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>virtualenv <span class="token parameter variable">-p</span> python3 <span class="token variable">$tensorflow_venv</span>
<span class="token builtin class-name">source</span> <span class="token variable">$tensorflow_venv</span>/bin/activate
pip <span class="token function">install</span> <span class="token parameter variable">--upgrade</span> pip
pip <span class="token function">install</span> <span class="token parameter variable">--upgrade</span> tensorflow
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>It is important that every time a new shell is started and one wants to use DeePMD-kit, the virtual environment should be activated by</p> <p>(每次使用DeePMD-kit时，激活虚拟环境)</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">source</span> <span class="token variable">$tensorflow_venv</span>/bin/activate
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>补充退出虚拟环境的命令</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>deactivate
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>测试这一步完成的命令（在虚拟环境中操作）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>python <span class="token parameter variable">-c</span> <span class="token string">&quot;import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))&quot;</span>
<span class="token comment">#安装正确时的输出：一个浮点数的输出（结果值取决于随机数生成的结果）</span>
<span class="token comment">#安装错误时的可能输出：ModuleNotFoundError: No module named 'tensorflow'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_4-2-2-2-install-the-deepmd-kit-s-python-interface"><a href="#_4-2-2-2-install-the-deepmd-kit-s-python-interface" class="header-anchor">#</a> 4.2.2.2 Install the DeePMD-kit’s python interface</h5> <p>很麻烦，自己看官网</p> <h4 id="_4-2-3-install-the-c-interface"><a href="#_4-2-3-install-the-c-interface" class="header-anchor">#</a> 4.2.3 Install the C++ interface</h4> <p>很麻烦，自己看官网配置</p> <h3 id="_4-3-在conda环境中安装deepmd-kit-十分推荐"><a href="#_4-3-在conda环境中安装deepmd-kit-十分推荐" class="header-anchor">#</a> 4.3 在Conda环境中安装DeePMD-kit （十分推荐）</h3> <p>优点：可以将DeepMD的环境和其他计算软件隔离开来，并且简化安装步骤。</p> <p>提醒：conda这玩意卡住是很正常的，安装时需要耐心等待。</p> <p>推荐创建GPU版本的DeePMD-kit和LAMMPS的Conda环境</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>conda create <span class="token parameter variable">-n</span> deepmd
<span class="token comment">#新建一个虚拟环境库</span>
conda activate deepmd
<span class="token comment">#进入这个新建的虚拟环境</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>conda <span class="token function">install</span> deepmodeling::cudatoolkit
<span class="token comment">#安装cuda工具</span>
nvidia-smi
<span class="token comment">#现实GPU信息和CUDA版本，如果第一行显示CUDA Version: 12.4，则说明安装成功</span>
<span class="token comment">#以及可以看到在2024年值$2,700的NVIDIA GeForce RTX 4090</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>conda <span class="token function">install</span> deepmodeling::libdeepmd<span class="token operator">=</span><span class="token number">2.2</span>.10<span class="token operator">=</span>*gpu
<span class="token comment">#安装可能要用到的库</span>
conda <span class="token function">install</span> deepmodeling::deepmd-kit<span class="token operator">=</span><span class="token number">2.2</span>.10<span class="token operator">=</span>*gpu
<span class="token comment">#下载GPU版本deepmd-kit，最好和libdeepmd版本一致</span>
conda <span class="token function">install</span> deepmodeling::horovod
<span class="token comment">#Distributed training framework for TensorFlow, Keras, PyTorch, and Apache MXNet.</span>
conda <span class="token function">install</span> deepmodeling::lammps
<span class="token comment">#下载lammps软件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <footer class="page-edit" style="margin:0;"><div class="edit-link"><a href="https://github.com/IfXie-Solid-Mechanics/my-first-repo/edit/master/DeePMD_kit_Learning/1_DeepMD_kit.md" target="_blank" rel="noopener noreferrer">完善页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----></div></div>  <main class="footer"> <div class="copy-right"><span class="name"> 编程导航   |     </span> <a target="_blank" rel="noreferrer">
          
        </a></div></main></main> <aside class="page-sidebar"> <div class="page-side-toolbar"></div>  </aside></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.589abb2b.js" defer></script><script src="/assets/js/2.f45b5605.js" defer></script><script src="/assets/js/72.f1ffe57f.js" defer></script>
  </body>
</html>
